

> # test.plotmo.R
> # This does a basic sanity test of plotmo.
> # For more comprehensive tests, see plotmo/src/tests.
> library(earth)
Loading required package: leaps
Loading required package: plotmo
Loading required package: plotrix
Warning message:
package 'plotrix' was built under R version 2.12.2 
> library(rpart)
Warning message:
package 'rpart' was built under R version 2.12.2 
> data(kyphosis)
> rpart.model <- rpart(Kyphosis~., data=kyphosis)
> plotmo(rpart.model, type="vec", trace=2)

--get.plotmo.x

formula Kyphosis ~ .
stripped formula Kyphosis~.
get.formula.data: got x from data passed to original call to rpart 
about to call model.frame(formula=Kyphosis~., data=structure(list(Kyphosis=structure(c(1L, 
              1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 
              1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
              1L, 1L, 1L, 1L, 2L, 1L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 2L, 
              1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 
              1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 2L, 1L
              ), .Label=c("absent", "present"), class="factor"), Age=c(71L, 
              158L, 128L, 2L, 1L, 1L, 61L, 37L, 113L, 59L, 82L, 148L, 18L, etc.
got x with colnames from object$call$formula

x[81,3]:
  Age Number Start
1  71      3     5
2 158      3    14
3 128      4     5

--get.plotmo.y

got y from object$y
get.plotmo.y returned length 81 min 1 max 2 values 1 1 2 1 1 1 1 1 1 2 ...

clip.limits 1 2 

--get.plotmo.singles

singles: 1 Age, 3 Start 

--get.plotmo.pairs

pairs:
     [,1]    [,2]     
[1,] "1 Age" "3 Start"

--plot.degree1(draw.plot=FALSE)

plotmo.predict(type="vec") for predictor "Age" with newdata[500,3]:
       Age Number Start
1 1.000000      4    13
2 1.410822      4    13
3 1.821643      4    13
predict() returned length 500 min 1 max 2 values 1 1 1 1 1 1 1 1 1 1 ...

plotmo.predict(type="vec") for predictor "Start" with newdata[500,3]:
  Age Number    Start
1  87      4 1.000000
2  87      4 1.034068
3  87      4 1.068136
predict() returned length 500 min 1 max 2 values 2 2 2 2 2 2 2 2 2 2 ...

--plot.degree2(draw.plot=FALSE)

plotmo.predict(type="vec") for predictors "Age" and "Start" with newdata[400,3]:
       Age Number Start
1  1.00000      4     1
2 11.78947      4     1
3 22.57895      4     1
predict() returned length 400 min 1 max 2 values 2 2 2 2 2 2 2 2 2 2 ...


ylim 1 2 

--plot.degree1(draw.plot=TRUE)

 grid:    Age Number Start
           87      4    13


--plot.degree2(draw.plot=TRUE)

persp(Age:Start) theta 145 ylim 1 2 cex 0.83 phi 30

> 
